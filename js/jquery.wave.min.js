$.fn.wave=function(e){var t=$.extend({wavelength:100,amplitude:60,phase:0,width:600,color:"DodgerBlue",bgColor:"",thickness:3,paddingH:0,paddingV:0,grid:false,gridSize:20,gridThickness:1,gridColor:"lightBlue"},e);var n=t.width+t.paddingH*2;var r=t.amplitude*2+t.paddingV*2;this.css({width:n,height:r,display:"inline-block"});var i=document.createElement("canvas");i.width=n;i.height=r;document.getElementById(this.attr("id")).appendChild(i);var s=document.createElement("canvas");s.width=n;s.height=r;var o=s.getContext("2d");o.clearRect(0,0,s.width,s.height);if(t.bgColor!=""){o.fillStyle=t.bgColor;o.fillRect(0,0,s.width,s.height)}if(t.grid){o.strokeStyle=t.gridColor;o.lineWidth=t.gridThickness;var u=t.gridSize;o.beginPath();for(var a=1;a<r/u;a++){o.moveTo(0,a*u);o.lineTo(n,a*u)}for(var f=1;f<n/u;f++){o.moveTo(f*u,0);o.lineTo(f*u,r)}o.stroke()}o.strokeStyle=t.color;o.lineWidth=t.thickness;var l=t.phase*Math.PI/180;var c=t.amplitude-t.thickness/2;var h=2*Math.PI*(1/t.wavelength);var p=r/2;var d,v;o.beginPath();for(var a=0;a<t.width;a++){d=c*Math.sin(l+h*a)+p;v=c*Math.sin(l+h*(a+1))+p;o.moveTo(a+t.paddingH,d);o.lineTo(a+t.paddingH+1,v)}o.stroke();var m=i.getContext("2d");m.clearRect(0,0,t.width,t.height);m.drawImage(s,0,0);return this};