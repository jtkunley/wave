;$.fn.wave=function(e){var t=5;var n=$.extend({wavelength:20,amplitude:80,phase:0,width:600,color:"DodgerBlue",bgColor:"white",thickness:3,grid:false,gridSize:20,gridThickness:1,gridColor:"lightBlue"},e);var r=n.amplitude*2;this.css({width:n.width,height:r,display:"inline-block"});var i=document.createElement("canvas");i.width=n.width;i.height=r;document.getElementById(this.attr("id")).appendChild(i);var s=document.createElement("canvas");s.width=n.width;s.height=r;var o=s.getContext("2d");o.clearRect(0,0,s.width,s.height);o.fillStyle=n.bgColor;o.fillRect(0,0,s.width,s.height);if(n.grid){o.strokeStyle=n.gridColor;o.lineWidth=n.gridThickness;var u=n.gridSize;o.beginPath();for(var a=1;a<r/u;a++){o.moveTo(0,a*u);o.lineTo(n.width,a*u)}for(var f=1;f<n.width/u;f++){o.moveTo(f*u,0);o.lineTo(f*u,r)}o.stroke()}o.strokeStyle=n.color;o.lineWidth=n.thickness;var l=n.phase*Math.PI/180;var c=r*n.amplitude/(2*100)-2;var h=2*Math.PI*(1/(n.wavelength*t));var p=r/2;var d,v;o.beginPath();for(var a=0;a<n.width;a++){d=c*Math.sin(l+h*a)+p;v=c*Math.sin(l+h*(a+1))+p;o.moveTo(a,d);console.log(a+" "+d);o.lineTo(a+1,v)}o.stroke();var m=i.getContext("2d");m.clearRect(0,0,n.width,n.height);m.drawImage(s,0,0);return this};